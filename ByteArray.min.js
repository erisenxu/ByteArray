if("function"==typeof require)var bigInt=require("big-integer");"undefined"==typeof Buffer&&(Buffer=function(){function t(n){var e=new Uint8Array(n);return e.dataView=new DataView(e.buffer),e.__proto__=t.prototype,e}return t.prototype.__proto__=Uint8Array.prototype,t.__proto__=Uint8Array,t.prototype.writeUInt8=function(t,n){this.dataView.setUint8(n,t)},t.prototype.writeUInt16BE=function(t,n){this.dataView.setUint16(n,t)},t.prototype.writeUInt32BE=function(t,n){this.dataView.setUint32(n,t)},t.prototype.writeInt8=function(t,n){this.dataView.setInt8(n,t)},t.prototype.writeInt16BE=function(t,n){this.dataView.setInt16(n,t)},t.prototype.writeInt32BE=function(t,n){this.dataView.setInt32(n,t)},t.prototype.readUInt8=function(t){return this.dataView.getUint8(t)},t.prototype.readUInt16BE=function(t){return this.dataView.getUint16(t)},t.prototype.readUInt32BE=function(t){return this.dataView.getUint32(t)},t.prototype.readInt8=function(t){return this.dataView.getInt8(t)},t.prototype.readInt16BE=function(t){return this.dataView.getInt16(t)},t.prototype.readInt32BE=function(t){return this.dataView.getInt32(t)},t.prototype.copy=function(t,n,e,r){for(var i=n,o=e;i<t.length&&o<r&&o<this.length;i++,o++)t[i]=this[o]},t}());var ByteArray=function(){"use strict";function t(t){t instanceof Buffer?(this.length=t.length,this.buffer=t):(this.length=0,this.buffer=new Buffer(t||1024))}return t.prototype.clear=function(){this.length=0},t.prototype.appendInt8=function(t){return this.expand(Int8Array.BYTES_PER_ELEMENT),this.buffer.writeInt8(t,this.length),this.length+=Int8Array.BYTES_PER_ELEMENT,this},t.prototype.getInt8=function(t){return this.buffer.readInt8(t||0)},t.prototype.appendUint8=function(t){return this.expand(Uint8Array.BYTES_PER_ELEMENT),this.buffer.writeUInt8(t,this.length),this.length+=Uint8Array.BYTES_PER_ELEMENT,this},t.prototype.getUint8=function(t){return this.buffer.readUInt8(t||0)},t.prototype.appendInt16=function(t){return this.expand(Int16Array.BYTES_PER_ELEMENT),this.buffer.writeInt16BE(t,this.length),this.length+=Int16Array.BYTES_PER_ELEMENT,this},t.prototype.getInt16=function(t){return this.buffer.readInt16BE(t||0)},t.prototype.appendUint16=function(t){return this.expand(Uint16Array.BYTES_PER_ELEMENT),this.buffer.writeUInt16BE(t,this.length),this.length+=Uint16Array.BYTES_PER_ELEMENT,this},t.prototype.getUint16=function(t){return this.buffer.readUInt16BE(t||0)},t.prototype.appendInt32=function(t){return this.expand(Int32Array.BYTES_PER_ELEMENT),this.buffer.writeInt32BE(t,this.length),this.length+=Int32Array.BYTES_PER_ELEMENT,this},t.prototype.getInt32=function(t){return this.buffer.readInt32BE(t||0)},t.prototype.appendUint32=function(t){return this.expand(Uint32Array.BYTES_PER_ELEMENT),this.buffer.writeUInt32BE(t,this.length),this.length+=Uint32Array.BYTES_PER_ELEMENT,this},t.prototype.getUint32=function(t){return this.buffer.readUInt32BE(t||0)},t.prototype.appendInt64=function(t){var n=new bigInt(t);return this.expand(Float64Array.BYTES_PER_ELEMENT),this.buffer.writeUInt32BE(n.shiftRight(32).and(4294967295),this.length),this.length+=Uint32Array.BYTES_PER_ELEMENT,this.buffer.writeUInt32BE(n.and(4294967295),this.length),this.length+=Uint32Array.BYTES_PER_ELEMENT,this},t.prototype.getInt64=function(t){var n=this.buffer.readUInt32BE(t||0),e=this.buffer.readUInt32BE((t||0)+Uint32Array.BYTES_PER_ELEMENT);return new bigInt(n).shiftLeft(32).or(e).toString()},t.prototype.appendUint64=function(t){return this.appendInt64(t)},t.prototype.getUint64=function(t){return this.getInt64(t||0)},t.prototype.appendBytes=function(t,n,e){t=t||[];var r=(n=n||0)+(e=e||t.length-n);this.expand(e);for(var i=n;i<r;i++)this.appendUint8(t[i]);return this},t.prototype.getBytes=function(t,n){var e=this.buffer.slice(t||0,void 0===n?this.length:n+t>this.length?this.length:n+t);return Array.prototype.slice.call(e)},t.prototype.getBuffer=function(){return this.buffer.slice(0,this.length)},t.prototype.appendString=function(n){return n=n||"",this.appendBytes(t.toUTF8(n)),this},t.prototype.expand=function(t){if(!(t<=0||this.length+t<=this.buffer.length)){var n=new Buffer(this.buffer.length+t);this.buffer.copy(n,0,0,this.length),this.buffer=n}},t.fromUTF8=function(t){if("string"==typeof t)return t;for(var n="",e=0;e<t.length;e++){var r=t[e].toString(2),i=r.match(/^1+?(?=0)/);if(i&&8==r.length){for(var o=i[0].length,f=t[e].toString(2).slice(7-o),h=1;h<o;h++)f+=t[h+e].toString(2).slice(2);n+=String.fromCharCode(parseInt(f,2)),e+=o-1}else n+=String.fromCharCode(t[e])}return n},t.toUTF8=function(t){for(var n=[],e=0;e<t.length;e++){var r=t.charCodeAt(e);0<=r&&r<=127?(1,n.push(r)):128<=r&&r<=2047?(2,n.push(192|31&r>>6),n.push(128|63&r)):(2048<=r&&r<=55295||57344<=r&&r<=65535)&&(3,n.push(224|15&r>>12),n.push(128|63&r>>6),n.push(128|63&r))}for(e=0;e<n.length;e++)n[e]&=255;return n},t.bytesToPrintable=function(t,n,e){var r="0000  ",i=0;n=n||0,e=void 0===e?t.length:e;for(var o=n;o<e;o++)o>n&&(o-n)%16==0&&(r+="\n",r+=(i+=16).toString(16).padStart(4,"0"),r+="  "),r+=t[o].toString(16).padStart(2,"0"),r+=" ";return r},t}();"undefined"!=typeof module&&module.hasOwnProperty("exports")&&(module.exports=ByteArray),"function"==typeof define&&define.amd&&define("byte-array",[],function(){return ByteArray});