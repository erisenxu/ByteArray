if(typeof require==="function")var bigInt=require("big-integer");if(typeof Buffer==="undefined"){var Buffer=function(){function n(t){var e=new Uint8Array(t);e.dataView=new DataView(e.buffer);e.__proto__=n.prototype;return e}n.prototype.__proto__=Uint8Array.prototype;n.__proto__=Uint8Array;n.prototype.writeUInt8=function(t,e){this.dataView.setUint8(e,t)};n.prototype.writeUInt16BE=function(t,e){this.dataView.setUint16(e,t)};n.prototype.writeUInt32BE=function(t,e){this.dataView.setUint32(e,t)};n.prototype.writeInt8=function(t,e){this.dataView.setInt8(e,t)};n.prototype.writeInt16BE=function(t,e){this.dataView.setInt16(e,t)};n.prototype.writeInt32BE=function(t,e){this.dataView.setInt32(e,t)};n.prototype.readUInt8=function(t){return this.dataView.getUint8(t)};n.prototype.readUInt16BE=function(t){return this.dataView.getUint16(t)};n.prototype.readUInt32BE=function(t){return this.dataView.getUint32(t)};n.prototype.readInt8=function(t){return this.dataView.getInt8(t)};n.prototype.readInt16BE=function(t){return this.dataView.getInt16(t)};n.prototype.readInt32BE=function(t){return this.dataView.getInt32(t)};n.prototype.copy=function(t,e,n,r){for(var i=e,o=n;i<t.length&&o<r&&o<this.length;i++,o++){t[i]=this[o]}};return n}()}var ByteArray=function(){"use strict";function e(t){if(t instanceof Buffer){this.length=t.length;this.buffer=t}else if(t instanceof ArrayBuffer||t instanceof Array){this.buffer=new Buffer(t);this.length=this.buffer.length}else if(typeof t==="number"||typeof t==="undefined"){this.length=0;this.buffer=new Buffer(t||1024)}else{this.length=0;this.buffer=new Buffer(1024)}}e.prototype.clear=function(){this.length=0};e.prototype.appendInt8=function(t){this.expand(Int8Array.BYTES_PER_ELEMENT);this.buffer.writeInt8(t,this.length);this.length+=Int8Array.BYTES_PER_ELEMENT;return this};e.prototype.getInt8=function(t){return this.buffer.readInt8(t||0)};e.prototype.appendUint8=function(t){this.expand(Uint8Array.BYTES_PER_ELEMENT);this.buffer.writeUInt8(t,this.length);this.length+=Uint8Array.BYTES_PER_ELEMENT;return this};e.prototype.getUint8=function(t){return this.buffer.readUInt8(t||0)};e.prototype.appendInt16=function(t){this.expand(Int16Array.BYTES_PER_ELEMENT);this.buffer.writeInt16BE(t,this.length);this.length+=Int16Array.BYTES_PER_ELEMENT;return this};e.prototype.getInt16=function(t){return this.buffer.readInt16BE(t||0)};e.prototype.appendUint16=function(t){this.expand(Uint16Array.BYTES_PER_ELEMENT);this.buffer.writeUInt16BE(t,this.length);this.length+=Uint16Array.BYTES_PER_ELEMENT;return this};e.prototype.getUint16=function(t){return this.buffer.readUInt16BE(t||0)};e.prototype.appendInt32=function(t){this.expand(Int32Array.BYTES_PER_ELEMENT);this.buffer.writeInt32BE(t,this.length);this.length+=Int32Array.BYTES_PER_ELEMENT;return this};e.prototype.getInt32=function(t){return this.buffer.readInt32BE(t||0)};e.prototype.appendUint32=function(t){this.expand(Uint32Array.BYTES_PER_ELEMENT);this.buffer.writeUInt32BE(t,this.length);this.length+=Uint32Array.BYTES_PER_ELEMENT;return this};e.prototype.getUint32=function(t){return this.buffer.readUInt32BE(t||0)};e.prototype.appendInt64=function(t){var e=new bigInt(t);this.expand(Float64Array.BYTES_PER_ELEMENT);this.buffer.writeUInt32BE(e.shiftRight(32).and(4294967295),this.length);this.length+=Uint32Array.BYTES_PER_ELEMENT;this.buffer.writeUInt32BE(e.and(4294967295),this.length);this.length+=Uint32Array.BYTES_PER_ELEMENT;return this};e.prototype.getInt64=function(t){var e=this.buffer.readUInt32BE(t||0);var n=this.buffer.readUInt32BE((t||0)+Uint32Array.BYTES_PER_ELEMENT);return new bigInt(e).shiftLeft(32).or(n).toString()};e.prototype.appendUint64=function(t){return this.appendInt64(t)};e.prototype.getUint64=function(t){return this.getInt64(t||0)};e.prototype.appendBytes=function(t,e,n){t=t||[];e=e||0;n=n||t.length-e;var r=e+n;this.expand(n);for(var i=e;i<r;i++){this.appendUint8(t[i])}return this};e.prototype.getBytes=function(t,e){var n=this.buffer.slice(t||0,e===undefined?this.length:e+t>this.length?this.length:e+t);return Array.prototype.slice.call(n)};e.prototype.getBuffer=function(){return this.buffer.slice(0,this.length)};e.prototype.appendString=function(t){t=t||"";this.appendBytes(e.toUTF8(t));return this};e.prototype.expand=function(t){if(t<=0||this.length+t<=this.buffer.length)return;var e=new Buffer(this.buffer.length+t);this.buffer.copy(e,0,0,this.length);this.buffer=e};e.fromUTF8=function(t){if(typeof t==="string"){return t}var e="";for(var n=0;n<t.length;n++){var r=t[n].toString(2);var i=r.match(/^1+?(?=0)/);if(i&&r.length==8){var o=i[0].length;var f=t[n].toString(2).slice(7-o);for(var h=1;h<o;h++){f+=t[h+n].toString(2).slice(2)}e+=String.fromCharCode(parseInt(f,2));n+=o-1}else{e+=String.fromCharCode(t[n])}}return e};e.toUTF8=function(t){var e=[];var n=0;for(var r=0;r<t.length;r++){var i=t.charCodeAt(r);if(0<=i&&i<=127){n+=1;e.push(i)}else if(128<=i&&i<=2047){n+=2;e.push(192|31&i>>6);e.push(128|63&i)}else if(2048<=i&&i<=55295||57344<=i&&i<=65535){n+=3;e.push(224|15&i>>12);e.push(128|63&i>>6);e.push(128|63&i)}}for(r=0;r<e.length;r++){e[r]&=255}return e};e.bytesToPrintable=function(t,e,n){var r="0000  ";var i=0;e=e||0;n=typeof n==="undefined"?t.length:n;for(var o=e;o<n;o++){if(o>e&&(o-e)%16===0){i+=16;r+="\n";r+=i.toString(16).padStart(4,"0");r+="  "}r+=t[o].toString(16).padStart(2,"0");r+=" "}return r};return e}();if(typeof module!=="undefined"&&module.hasOwnProperty("exports")){module.exports=ByteArray}if(typeof define==="function"&&define.amd){define("byte-array",[],function(){return ByteArray})}
